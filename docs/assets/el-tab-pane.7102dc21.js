import{c as L,u as U,B as $,w as R,D as J,ai as x,e as Y,m as Q,K as de,S as be,s as H,_ as K,p as I,o as Z,E as ee,X as d,z as fe,L as te,J as ve,aj as me,V as pe,af as he,G as ye,H as ge,I as Te}from"./vendor.3a968c7d.js";import{c as V,d as F,m as ae,k as se,g as ne,s as _e,v as $e,f as A,E as M,x as q,w as Ne,y as Ee}from"./base.d0d60045.js";import{t as j,U as oe,I as le,p as Pe}from"./event.4b05a53a.js";import{a as we,b as Se,c as Ce}from"./close.906d75c0.js";const D=Symbol("tabsRootContextKey"),Be=V({tabs:{type:F(Array),default:()=>ae([])}}),W="ElTabBar",Oe=L({name:W,props:Be,setup(e){const o=H(),f=U(D);f||j(W,"must use with ElTabs");const v=$(),l=$(),c=()=>{let b=0,g=0;const u=["top","bottom"].includes(f.props.tabPosition)?"width":"height",P=u==="width"?"x":"y";return e.tabs.every(w=>{var S,z,B,t;const i=(z=(S=o.parent)==null?void 0:S.refs)==null?void 0:z[`tab-${w.paneName}`];if(!i)return!1;if(!w.active)return!0;g=i[`client${x(u)}`];const m=P==="x"?"left":"top";b=i.getBoundingClientRect()[m]-((t=(B=i.parentElement)==null?void 0:B.getBoundingClientRect()[m])!=null?t:0);const h=window.getComputedStyle(i);return u==="width"&&(e.tabs.length>1&&(g-=parseFloat(h.paddingLeft)+parseFloat(h.paddingRight)),b+=parseFloat(h.paddingLeft)),!1}),{[u]:`${g}px`,transform:`translate${x(P)}(${b}px)`}},s=()=>l.value=c();return R(()=>e.tabs,async()=>{await J(),s()},{immediate:!0}),se(v,()=>s()),{bar$:v,rootTabs:f,barStyle:l,update:s}}});function ke(e,o,f,v,l,c){return Y(),Q("div",{ref:"bar$",class:de(["el-tabs__active-bar",`is-${e.rootTabs.props.tabPosition}`]),style:be(e.barStyle)},null,6)}var xe=ne(Oe,[["render",ke]]);const Re=V({panes:{type:F(Array),default:()=>ae([])},currentName:{type:[String,Number],default:""},editable:Boolean,onTabClick:{type:F(Function),default:K},onTabRemove:{type:F(Function),default:K},type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),X="ElTabNav";var ze=L({name:X,props:Re,setup(e,{expose:o}){const f=_e(),v=$e(),l=U(D);l||j(X,"ElTabNav must be nested inside ElTabs");const c=$(!1),s=$(0),b=$(!1),g=$(!0),u=$(),P=$(),w=$(),S=I(()=>["top","bottom"].includes(l.props.tabPosition)?"width":"height"),z=I(()=>({transform:`translate${S.value==="width"?"X":"Y"}(-${s.value}px)`})),B=()=>{if(!u.value)return;const a=u.value[`offset${x(S.value)}`],r=s.value;if(!r)return;const n=r>a?r-a:0;s.value=n},t=()=>{if(!u.value||!P.value)return;const a=P.value[`offset${x(S.value)}`],r=u.value[`offset${x(S.value)}`],n=s.value;if(a-n<=r)return;const N=a-n>r*2?n+r:a-r;s.value=N},i=()=>{const a=P.value;if(!c.value||!w.value||!u.value||!a)return;const r=w.value.querySelector(".is-active");if(!r)return;const n=u.value,N=["top","bottom"].includes(l.props.tabPosition),T=r.getBoundingClientRect(),y=n.getBoundingClientRect(),E=N?a.offsetWidth-y.width:a.offsetHeight-y.height,_=s.value;let p=_;N?(T.left<y.left&&(p=_-(y.left-T.left)),T.right>y.right&&(p=_+T.right-y.right)):(T.top<y.top&&(p=_-(y.top-T.top)),T.bottom>y.bottom&&(p=_+(T.bottom-y.bottom))),p=Math.max(p,0),s.value=Math.min(p,E)},m=()=>{if(!P.value||!u.value)return;const a=P.value[`offset${x(S.value)}`],r=u.value[`offset${x(S.value)}`],n=s.value;if(r<a){const N=s.value;c.value=c.value||{},c.value.prev=N,c.value.next=N+r<a,a-N<r&&(s.value=a-r)}else c.value=!1,n>0&&(s.value=0)},h=a=>{const r=a.code,{up:n,down:N,left:T,right:y}=M;if(![n,N,T,y].includes(r))return;const E=Array.from(a.currentTarget.querySelectorAll("[role=tab]")),_=E.indexOf(a.target);let p;r===T||r===n?_===0?p=E.length-1:p=_-1:_<E.length-1?p=_+1:p=0,E[p].focus(),E[p].click(),O()},O=()=>{g.value&&(b.value=!0)},C=()=>b.value=!1;return R(f,a=>{a==="hidden"?g.value=!1:a==="visible"&&setTimeout(()=>g.value=!0,50)}),R(v,a=>{a?setTimeout(()=>g.value=!0,50):g.value=!1}),se(w,m),Z(()=>setTimeout(()=>i(),0)),ee(()=>m()),o({scrollToActiveTab:i,removeFocus:C}),()=>{const a=c.value?[d("span",{class:["el-tabs__nav-prev",c.value.prev?"":"is-disabled"],onClick:B},[d(A,{},{default:()=>d(we)})]),d("span",{class:["el-tabs__nav-next",c.value.next?"":"is-disabled"],onClick:t},[d(A,{},{default:()=>d(Se)})])]:null,r=e.panes.map((n,N)=>{var T,y;const E=n.props.name||n.index||`${N}`,_=n.isClosable||e.editable;n.index=`${N}`;const p=_?d(A,{class:"is-icon-close",onClick:k=>e.onTabRemove(n,k)},{default:()=>d(Ce)}):null,ce=((y=(T=n.instance.slots).label)==null?void 0:y.call(T))||n.props.label,ue=n.active?0:-1;return d("div",{class:{"el-tabs__item":!0,[`is-${l.props.tabPosition}`]:!0,"is-active":n.active,"is-disabled":n.props.disabled,"is-closable":_,"is-focus":b},id:`tab-${E}`,key:`tab-${E}`,"aria-controls":`pane-${E}`,role:"tab","aria-selected":n.active,ref:`tab-${E}`,tabindex:ue,onFocus:()=>O(),onBlur:()=>C(),onClick:k=>{C(),e.onTabClick(n,E,k)},onKeydown:k=>{_&&(k.code===M.delete||k.code===M.backspace)&&e.onTabRemove(n,k)}},[ce,p])});return d("div",{ref:w,class:["el-tabs__nav-wrap",c.value?"is-scrollable":"",`is-${l.props.tabPosition}`]},[a,d("div",{class:"el-tabs__nav-scroll",ref:u},[d("div",{class:["el-tabs__nav",`is-${l.props.tabPosition}`,e.stretch&&["top","bottom"].includes(l.props.tabPosition)?"is-stretch":""],ref:P,style:z.value,role:"tablist",onKeydown:h},[e.type?null:d(xe,{tabs:[...e.panes]}),r])])])}}});const Fe=V({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:String,default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number],default:""},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:F(Function),default:()=>!0},stretch:Boolean}),Ae={[oe]:e=>typeof e=="string"||typeof e=="number",[le]:e=>typeof e=="string"||typeof e=="number","tab-click":(e,o)=>o instanceof Event,edit:(e,o)=>o==="remove"||o==="add","tab-remove":e=>typeof e=="string"||typeof e=="number","tab-add":()=>!0},ie=(e,o=[])=>{const f=e.children||[];return Array.from(f).forEach(v=>{let l=v.type;l=l.name||l,l==="ElTabPane"&&v.component?o.push(v.component):(l===ve||l==="template")&&ie(v,o)}),o};var Me=L({name:"ElTabs",props:Fe,emits:Ae,setup(e,{emit:o,slots:f,expose:v}){const l=H(),c=$(),s=$([]),b=$(e.modelValue||e.activeName||"0"),g={},u=(t=!1)=>{if(f.default){const i=l.subTree.children,m=Array.from(i).find(({props:C})=>(C==null?void 0:C.class)==="el-tabs__content");if(!m)return;const h=ie(m).map(C=>g[C.uid]),O=!(h.length===s.value.length&&h.every((C,a)=>C.uid===s.value[a].uid));(t||O)&&(s.value=h)}else s.value.length!==0&&(s.value=[])},P=t=>{b.value=t,o(le,t),o(oe,t)},w=t=>{var i;if(b.value===t)return;const m=(i=e.beforeLeave)==null?void 0:i.call(e,t,b.value);me(m)?m.then(()=>{var h,O;P(t),(O=(h=c.value)==null?void 0:h.removeFocus)==null||O.call(h)},K):m!==!1&&P(t)},S=(t,i,m)=>{t.props.disabled||(w(i),o("tab-click",t,m))},z=(t,i)=>{t.props.disabled||(i.stopPropagation(),o("edit",t.props.name,"remove"),o("tab-remove",t.props.name))},B=()=>{o("edit",null,"add"),o("tab-add")};return ee(()=>u()),Z(()=>u()),R(()=>e.activeName,t=>w(t)),R(()=>e.modelValue,t=>w(t)),R(b,async()=>{var t,i;u(!0),await J(),await((t=c.value)==null?void 0:t.$nextTick()),(i=c.value)==null||i.scrollToActiveTab()}),fe(D,{props:e,currentName:b,updatePaneState:t=>g[t.uid]=t}),v({currentName:b}),()=>{const t=e.editable||e.addable?d("span",{class:"el-tabs__new-tab",tabindex:"0",onClick:B,onKeydown:h=>{h.code===M.enter&&B()}},[d(A,{class:"is-icon-plus"},{default:()=>d(Pe)})]):null,i=d("div",{class:["el-tabs__header",`is-${e.tabPosition}`]},[t,d(ze,{currentName:b.value,editable:e.editable,type:e.type,panes:s.value,stretch:e.stretch,ref:c,onTabClick:S,onTabRemove:z})]),m=d("div",{class:"el-tabs__content"},[te(f,"default")]);return d("div",{class:{"el-tabs":!0,"el-tabs--card":e.type==="card",[`el-tabs--${e.tabPosition}`]:!0,"el-tabs--border-card":e.type==="border-card"}},e.tabPosition!=="bottom"?[i,m]:[m,i])}}});const Ie=V({label:{type:String,default:""},name:{type:[String,Number],default:""},closable:Boolean,disabled:Boolean,lazy:Boolean}),G="ElTabPane",Le=L({name:G,props:Ie,setup(e){const o=H(),f=U(D);f||j(G,"must use with ElTabs");const v=$(),l=$(!1),c=I(()=>e.closable||f.props.closable),s=q(()=>f.currentName.value===(e.name||v.value)),b=I(()=>e.name||v.value),g=q(()=>!e.lazy||l.value||s.value);return R(s,u=>{u&&(l.value=!0)}),f.updatePaneState(pe({uid:o.uid,instance:he(o),props:e,paneName:b,active:s,index:v,isClosable:c})),{active:s,paneName:b,shouldBeRender:g}}}),Ve=["id","aria-hidden","aria-labelledby"];function De(e,o,f,v,l,c){return e.shouldBeRender?ye((Y(),Q("div",{key:0,id:`pane-${e.paneName}`,class:"el-tab-pane",role:"tabpanel","aria-hidden":!e.active,"aria-labelledby":`tab-${e.paneName}`},[te(e.$slots,"default")],8,Ve)),[[ge,e.active]]):Te("v-if",!0)}var re=ne(Le,[["render",De]]);const qe=Ne(Me,{TabPane:re}),We=Ee(re);export{We as E,qe as a};
